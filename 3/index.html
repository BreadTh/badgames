<!DOCTYPE html>
<html>
<head>
<title>Space Runner</title>
<link rel="stylesheet" id="main-css">
</head>
<body>
<div id="fade-overlay" style="position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:9999;pointer-events:none;display:flex;align-items:center;justify-content:center"><span id="fade-loading" style="color:#556;font-size:1.2em;font-family:monospace;letter-spacing:0.1em;opacity:0">LOADING<span id="fade-dots" style="display:inline-block;width:3ch;text-align:left">.</span></span></div>
<div id="menu" style="display:none">
  <div id="version"></div>
  <h1>SPACE RUNNER</h1>
  <input type="text" id="player-name" maxlength="30" spellcheck="false" autocomplete="off">
  <div class="subtitle">player name</div>
  <div class="section-title">LEVEL SELECT</div>
  <div id="level-list"></div>
  <div id="total-score"></div>
  <button id="load-playback-btn" class="level-btn" style="margin-top:1em;justify-content:center">Load Playback</button>
  <input type="file" id="playback-file" accept=".run" style="display:none">
  <a id="more-games" href="../">play more games?</a>
</div>
<canvas id="game-canvas"></canvas>
<div id="custom-cursor"></div>
<div id="hud">
  <canvas id="hud-canvas"></canvas>
</div>
<script>
var GAME_VERSION = '1.2.1';
var UNOFFICIAL = false;
document.getElementById('version').textContent = 'v' + GAME_VERSION;
document.getElementById('main-css').href = 'style.css?v=' + GAME_VERSION;

// Loading animation (starts hidden, fades in if scripts take time)
window._loadingStopped = false;
requestAnimationFrame(function() { requestAnimationFrame(function() {
  if (window._loadingStopped) return;
  var el = document.getElementById('fade-loading');
  var start = performance.now();
  function fadeIn() {
    if (window._loadingStopped) return;
    var t = Math.min(1, (performance.now() - start) / 250);
    el.style.opacity = t;
    if (t < 1) requestAnimationFrame(fadeIn);
  }
  requestAnimationFrame(fadeIn);
  var dotsEl = document.getElementById('fade-dots');
  var dots = 0;
  window._loadingInterval = setInterval(function() {
    dots = (dots + 1) % 3;
    dotsEl.textContent = '.'.repeat(dots + 1);
  }, 400);
}); });

// Emit script tags
var vq = '?v=' + GAME_VERSION;
[
  'https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js',
  'levels.js','level1.js','level2.js','level3.js','level4.js','level5.js','level6.js','level7.js',
  'sounds.js','constants.js','chunks.js','ship.js','particles.js','hud.js','player.js',
  'scene.js','recording.js','game.js'
].forEach(function(src) {
  document.write('<script src="' + (src.indexOf('://') >= 0 ? src : src + vq) + '"><\/script>');
});
</script>
<script>
window._loadingStopped = true;
if (window._loadingInterval) clearInterval(window._loadingInterval);
window.bootGame();
</script>
</body>
</html>
